# http 隧道代理
支持HTTP HTTPS Websocket Websockets

# 主要解决目标：客户端不能直接访问的服务，必须通过代理去访问服务
client ---> proxy ————> server
情况1：客户端不能直接访问，127.0.0.1:8080(服务不对外暴露端口)，客户端不能直接访问，需通过代理服务访问
情况2：客户端不能直接访问，10.36.0.130(内网地址)，客户端不能直接访问，需通过代理服务去访问


下图是《HTTP 权威指南》书中的插图，它讲解了客户端通过隧道代理连接 HTTPS 服务器的过程。

（a）客户端先发送 CONNECT 请求到隧道代理服务器，告诉它建立和服务器的 TCP 连接（因为是 TCP 连接，只需要 ip 和端口就行，不需要关注上层的协议类型）
（b，c）代理服务器成功和后端服务器建立 TCP 连接
（d）代理服务器返回 HTTP 200 Connection Established 报文，告诉客户端连接已经成功建立
（e）这个时候就建立起了连接，所有发给代理的 TCP 报文都会直接转发，从而实现服务器和客户端的通信

![Alt text](image.png)